<MainBt@MDRaisedButton>:
    elevation_normal: 2
    opposite_colors: True
    size_hint: .9,.5
    pos_hint: {"center_x": .5}

<MyToolBar@MDToolbar>
    md_bg_color: app.theme_cls.primary_color

<MainScreen>:
    income: income
    expense: expense
    balance: balance
    state_text: state_text

    BoxLayout:
        orientation: 'vertical'

        MyToolBar:
            title: "Money manager"
            right_action_items: [['settings', lambda x: root.open_settings()]]

        BoxLayout:

            orientation: 'vertical'
            size_hint: 1,1

            BoxLayout:
                orientation: 'vertical'
                canvas.before:
                    Color:
                        rgba: app.theme_cls.primary_color
                    Rectangle:
                        pos: self.pos
                        size: self.size

                size_hint_y: .2

                BoxLayout:

                    MainBt:
                        elevation_normal: 0
                        opposite_colors: False
                        size_hint: .5,0
                        text: "Day"
                        on_press:
                            root.state_day()

                    MainBt:
                        elevation_normal: 0
                        opposite_colors: False
                        size_hint: .5,0
                        text: "Month"
                        on_press:
                            root.state_month()

                    MainBt:
                        elevation_normal: 0
                        opposite_colors: False
                        size_hint: .5,0
                        text: "Year"
                        on_press:
                            root.state_year()
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: .4
                MDLabel:
                    id: state_text
                    text: 'Day info:'
                    halign:'center'
                    valign:'center'
            GridLayout:
                cols:2

                MDLabel:
                    id: expense
                    text: ''
                    halign:'center'

                MDLabel:
                    id: income
                    text: ''
                    halign:'center'

            BoxLayout:
                orientation: 'vertical'

                MDLabel:
                    id: balance
                    text: ''
                    halign:'center'

                MainBt:
                    text: "Full info"
                    on_press:
                        root.manager.transition.direction = 'up'
                        root.manager.transition.duration = .3
                        root.manager.current = 'info_screen'

            BoxLayout:
                padding: 20,0,20,20
                spacing: 20

                MainBt:
                    text: "Expense"
                    on_press:
                        root.manager.transition.direction = 'up'
                        root.manager.transition.duration = .3
                        root.manager.current = 'expense_screen'

                MainBt:
                    text: "Income"
                    on_press:
                        root.manager.transition.direction = 'up'
                        root.manager.transition.duration = .3
                        root.manager.current = 'income_screen'
<InfoItems>:

    canvas.before:
        Color:
            rgba: app.theme_cls.primary_color
        Line:
            width: 1
            rectangle: self.x-10, self.y, self.width+20, self.height

<InfoScreen>:
    scroll: scroll

    BoxLayout:
        orientation: 'vertical'

        MyToolBar:
            title: "Full info"
            right_action_items: [['keyboard-backspace', lambda x: root.back_to_main_menu()]]

        BoxLayout:
            orientation: 'vertical'
            canvas.before:
                Color:
                    rgba: app.theme_cls.primary_color
                Rectangle:
                    pos: self.pos
                    size: self.size

            size_hint_y: .1

            BoxLayout:

                MainBt:
                    elevation_normal: 0
                    opposite_colors: False
                    size_hint: .5,0
                    text: "Expense"
                    on_press:
                        root.info_tabs('add_waste','Expense day info:')

                MainBt:
                    elevation_normal: 0
                    opposite_colors: False
                    size_hint: .5,0
                    text: "Income"
                    on_press:
                        root.info_tabs('add_new_money','Income day info:')

        BoxLayout:
            size_hint_y: .1
            orientation: 'vertical'
            padding: 0, 0, 0, 10

            MDLabel:
                id: info_text
                size_hint_y: .1
                text: 'Expense day info:'
                halign:'center'

        ScrollView:

            BoxLayout:
                padding: 15,15,15,15
                id: scroll
                size_hint_y: None
                height: sum(x.height * 1.5 for x in self.children)
                orientation: 'vertical'


<SettingsScreen>:

    BoxLayout:
        orientation: 'vertical'

        MyToolBar:
            title: "Settings"
            right_action_items: [['keyboard-backspace', lambda x: root.back_to_main_menu()]]

        BoxLayout:
            orientation: 'vertical'

            MDLabel:
                size_hint_y: .1
                text: 'Warning it will clear all database:'
                halign:'center'

            MainBt:
                id: clear_bt
                size_hint: .5,0
                text: "Clear database"
                on_press:
                    root.clear_database()

<IncomeScreen>:
    text_input_sum: text_input_sum
    text_input_description: text_input_description

    BoxLayout:
        orientation: 'vertical'

        MyToolBar:
            title: "Income"
            right_action_items: [['keyboard-backspace', lambda x: root.back_to_main_menu()]]

        BoxLayout:
            padding: 20,20,20,20
            spacing: 20
            orientation: 'vertical'

            BoxLayout:
                size_hint_y: .7
                orientation: 'vertical'

                MDLabel:
                    size_hint_y: .1
                    text: 'Enter income sum:'
                    halign:'center'

                MDTextField:
                    id: text_input_sum
                    hint_text: "Enter income"
                    helper_text_mode: "persistent"
                    input_type: 'number'
                    input_filter: 'int'

                MDLabel:
                    size_hint_y: .1
                    text: 'Enter description:'
                    halign:'center'

                MDTextField:
                    id: text_input_description
                    hint_text: "Enter description"
                    helper_text_mode: "persistent"

                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: .3
                    padding: 0,0,0,30

                    MainBt:
                        size_hint: .5,0
                        text: "Income"
                        on_press:
                            root.add_m()

<ExpenseScreen>:
    text_input_sum: text_input_sum
    text_input_description: text_input_description

    BoxLayout:
        orientation: 'vertical'

        MyToolBar:
            title: "Expense"
            right_action_items: [['keyboard-backspace', lambda x: root.back_to_main_menu()]]

        BoxLayout:
            padding: 20,20,20,20
            spacing: 20
            orientation: 'vertical'

            BoxLayout:
                size_hint_y: .7
                orientation: 'vertical'

                MDLabel:
                    size_hint_y: .1
                    text: 'Enter expense sum:'
                    halign:'center'

                MDTextField:
                    id: text_input_sum
                    hint_text: "Enter expense"
                    helper_text_mode: "persistent"
                    input_type: 'number'
                    input_filter: 'int'

                MDLabel:
                    size_hint_y: .1
                    text: 'Enter description:'
                    halign:'center'

                MDTextField:
                    id: text_input_description 
                    hint_text: "Enter description"
                    helper_text_mode: "persistent"

                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: .3
                    padding: 0,0,0,30

                    MainBt:
                        size_hint: .5,0
                        text: "Expense"
                        on_press:
                            root.add_w()


MainScreenManager:
    screen_manager: screen_manager
    ScreenManager:
        id: screen_manager
        MainScreen:
            name: 'main_screen'

        InfoScreen:
            name: 'info_screen' 

        SettingsScreen:
            name: 'settings_screen'

        IncomeScreen:
            name: 'income_screen'

        ExpenseScreen:
            name: 'expense_screen'
